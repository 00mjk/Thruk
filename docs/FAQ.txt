Frequently Asked Questions
==========================

== General

=== Is Thruk an Abbreviation? What does Thruk mean?

Thruk is just a random word and has no meaning. Pronounce it like 'Truck'.


=== Where is the statusmap?

The statusmap got replaced by a own variant which is more scalable in
large environments. Its shipped as Thruk addon, but enabled by
default.


=== Authorization/Authentication is not working

Authentication is done by the webserver, so authentication is only available
with the fastcgi version.


=== All dates and times are displayed with the wrong timezone

Try to set the use_timezone configuration option in your
thruk_local.conf



== Usage

=== How do i select hosts/services on the status page?

Just click on the empty table row when the row is highlighted. This only works
if you do not click on a link.




== Customization

=== How to change the side menu
Thruks web frontend look & feel is much like the Nagios web frontend.
The main left menu is highly editable through local menu.cfg. It is
recommended to copy menu.cfg to menu_local.cfg in order to keep the
own menu on updating Thruk. Now you can edit your own menu.

Open your menu_local.cfg with your preferred text editor and check the
config. You can add new sections with: 

....
add_section('name' => 'General');
....

To add a new link use the following syntax:

....
add_link('name' => 'Home', 'href' => '/thruk/main.html');
....

.Available parameters
* name: This is how the link is called in the web front end.
* href: This is the destination link optional you can add.
* target: If Link shall open in a new window.
* icon: Used for themes which support icons.

Then the config looks like this: 

....
add_link('name' => 'Nagios, 'href' => '/nagios', 'target' => '_new'); 
....


=== How can i integrate Nagvis Maps
Integrating Nagivs is currently only possible when frames are enabled.
So first step is editing the thruk_local.conf and set
....
 use_frames = 1
....

Integration is easy. Just copy and edit your menu_local.conf.
For Nagvis 1.4 add something like:
....
 add_section('name' => 'Nagvis');
 add_link('name' => "Nagvis",        'href' => '/nagvis/frontend/nagvis-js/index.php');
 add_sub_link('name' => "demo",      'href' => '/nagvis/index.php?Map=demo');
 add_sub_link('name' => "demo-map2", 'href' => '/nagvis/index.php?Map=demo-map2');
....

For Nagvis 1.5:
....
add_section('name' => 'Nagvis');
add_link('name' => "Nagvis",         'href' => '/nagvis/frontend/nagvis-js/index.php');
add_sub_link('name' => "demo",       'href' => '/nagvis/frontend/nagvis-js/index.php?mod=Map&act=view&show=demo');
add_sub_link('name' => "demo-map2",  'href' => '/nagvis/frontend/nagvis-js/index.php?mod=Map&act=view&show=demo-map2');
....
Thruk has to be restarted.


=== How can i add more themes?

Themes are located under 'root/thruk/themes/'. Just copy and modify the one you
like.


=== How can i disable themes?

This is not possible at the moment. However, you could remove the theme
physically from 'root/thruk/themes/'. Make sure you replace symlinks from other
themes with proper files if you remove the Classic theme.



== Installation

=== How can i enable debug mode?
==== Thruk Server
For a quick test without authorization, you can start the thruk server
with './script/thruk_server.pl -d'. Make sure your log4perl.conf has
DEBUG theshold configured. You can also move your log4perl.conf away,
so all debug output will be sent to the terminal.

==== FastCGI Server
This is a bit more complicate.
First you have to enable debuging for your thruk application.
Add '-Debug' to the use Catalyst in your lib/Thruk.pm. The part
should look like this:
------------------
  use Catalyst qw/
                -Debug
                Unicode::Encoding
                Authentication
                Authorization::ThrukRoles
                CustomErrorMessage
                ConfigLoader
                StackTrace
                Static::Simple
                Redirect
                Compress::Gzip
                /;
  our $VERSION = '0.60';
------------------

Then make sure you have a log4perl.conf with DEBUG threshold configured. 
Finally restart your fastcgi server.


== Errors
=== Backend not available

The socat solution for using livestatus with SSL does not longer work
due to problems with socat and json data. If you see errors like:

------------------
[ERROR][Thruk.Controller.Root] Caught exception in Thruk::Controller::status->index "socket error at thruk/script/../lib/Monitoring/Livestatus/Class/Base/Table.pm line 186"
[ERROR][Thruk.Controller.error] internal server error
------------------

and you use socat for livestatus over ssl, please change to stunnel or
ssh with the normal xinetd solution.
