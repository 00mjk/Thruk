<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <title>[% title_prefix %]Thruk Panorama</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="[% url_prefix %]thruk/plugins/panorama/extjs-4.1.0/resources/css/ext-all-gray.css">
    <link rel='stylesheet' type='text/css' href='[% url_prefix %]thruk/plugins/panorama/panorama-[% version %].css' />
    <script type="application/x-javascript">
    <!--
      var theme                  = '[% theme %]';
      var url_prefix             = '[% url_prefix %]';
      var cookie_path            = '[% cookie_path %]';
      var base                   = '[% url_prefix %]thruk/plugins/panorama';
      [%+ PROCESS _header_initial_states.tt +%]
      [%+ PROCESS _common_js_bugs.tt +%]
    -->
    </script>

    <script type="text/javascript" charset="UTF-8" src="[% url_prefix %]thruk/plugins/panorama/extjs-4.1.0/ext-all-debug.js"></script>
    <script type="text/javascript">
      var ExtState     = [% state %];
      var default_view = '[% default_view %]';

      [% IF stateprovider == 'server' %]
      [%+ PROCESS _panorama_js_state_provider_http.tt +%]
      [% ELSE %]
      [%+ PROCESS _panorama_js_state_provider_cookie.tt +%]
      [% END %]
      [%+ PROCESS _panorama_js.tt +%]
      [%+ PROCESS _panorama_js_utils_base64.tt +%]
      [%+ PROCESS _panorama_js_slider.tt +%]
      [%+ PROCESS _panorama_js_grid_renderer.tt +%]
      [%+ PROCESS _panorama_js_settings_global.tt +%]
      [%+ PROCESS _panorama_js_tabbar.tt +%]
      [%+ PROCESS _panorama_js_pantab.tt +%]
      [%+ PROCESS _panorama_js_panlet.tt +%]
      [%+ PROCESS _panorama_js_panlet_url.tt +%]
      [%+ PROCESS _panorama_js_panlet_grid.tt +%]
      [%+ PROCESS _panorama_js_panlet_grid_core_metrics.tt +%]
      [%+ PROCESS _panorama_js_panlet_grid_logs.tt +%]
      [%+ PROCESS _panorama_js_panlet_grid_server.tt +%]
      [%+ PROCESS _panorama_js_panlet_grid_hosts.tt +%]
      [%+ PROCESS _panorama_js_panlet_grid_services.tt +%]
      [%+ PROCESS _panorama_js_panlet_chart.tt +%]
      [%+ PROCESS _panorama_js_panlet_chart_gearman.tt +%]
      [%+ PROCESS _panorama_js_panlet_piechart.tt +%]
      [%+ PROCESS _panorama_js_panlet_piechart_stats.tt +%]
      [%+ PROCESS _panorama_js_panlet_pnp.tt +%]

      /* main viewport */
      Ext.onReady(function() {
        Ext.QuickTips.init();

        /* do we have a state? */
        var state = cp.readValues();
        if(!state['tabpan'] && default_view != '') {
            debug("using default view");
            data = cp.decodeValue(decode64(default_view));
            cp.loadData(data);
        }

        TP.viewport = new Ext.Viewport({
          id:       'viewport',
          layout:   'border',
          renderTo: Ext.getBody(),
          margins:  '0 0 0 0',
          items:    [ new TP.TabBar() ]
        });
        Ext.getCmp('bug_report').hide();
      });
    </script>
</head>
<body>
[% FOREACH i = preload_img %]
<img src="[% url_prefix %]thruk/plugins/panorama/images/[% i %]" alt="preloader" height=0 width=0>
[% END %]
</body>
</html>
